console.log("----- Welcome to dev options Music App -------");

const bottom = document.querySelector(".bottom");

// Dev-Data
const songs = [
  {
    img: "./shiddat.jpg",
    song: "./music_files/Shiddat - Title Song.mp3",
    title: "Shiddat",
  },
  { img: "./1.jpg", song: "./1.mp3", title: "One" },
  { img: "./2.jpg", song: "./2.mp3", title: "Two" },
  { img: "./3.jpg", song: "./3.mp3", title: "Three" },
];

let currentSongIndex = 0;
let currentSong = songs[currentSongIndex];

bottom.addEventListener("mouseout", function (e) {
  e.preventDefault();
  bottom.style.opacity = "0.75";
  console.log(bottom.style.opacity);

  setTimeout(() => {
    bottom.style.opacity = "0.5";
  }, 2000);
});

setTimeout(() => {
  bottom.style.opacity = "0.5";
}, 2000);

// Heart making
const heart = () => {
  document.getElementById("heart").classList.toggle("u-color-red");
};

// Play functionality

const play = document.getElementById("masterplay");

const playFctn = (song) => {

  var audio = new Audio(song.song);
  play.addEventListener("click", () => {
    if (audio.paused || audio.currentTime <= 0) {
      // Play it
      audio.play();
    } else {
      audio.pause();
    }
  });

  audio.addEventListener("timeupdate", () => {
    // Update play bar
    progress = parseInt((audio.currentTime / audio.duration) * 100);
    myProgressBar.value = progress;
  });

  myProgressBar.addEventListener("change", () => {
    audio.currentTime = (myProgressBar.value * audio.duration) / 100; // As we have the myProgressBar.value in the form of percent 0-100
  });

  // Return the current audio variable to change it in future
  return audio;
};

play.addEventListener("click", (e) => {
  e.preventDefault();
  play.classList.toggle("fa-circle-pause");
  play.classList.toggle("fa-play-circle");
});

const myProgressBar = document.getElementById("myprogressbar");

// Handle play pause
let currentAudio = playFctn(currentSong);

// Implement the prev and next

const prev = document.getElementById("masterPrev");
const next = document.getElementById("masterNext");

prev.addEventListener("click", () => {
    alert("Will implement this soon");
});

next.addEventListener("click", () => {
  // Increase the current song value by 1
  alert("Will implement this soon");
});
